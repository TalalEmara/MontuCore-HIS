meta {
  name: Register
  type: http
  seq: 1
}

post {
  url: {{baseURL}}/auth/register
  body: json
  auth: none
}

headers {
  Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiZW1haWwiOiJhZG1pbkBzcG9ydHNoaXMuY29tIiwicm9sZSI6IkFETUlOIiwiaWF0IjoxNzY2NzExMjMyLCJleHAiOjE3NjY5NzA0MzJ9.k2t_j973v7vNw1BKSgeWj6hFPeXNU4N-f2O-BPQJlTU
}

body:json {
  {
    "generalData": {
      "email": "newsUser3@sportshis.com",
      "password": "Test123!",
      "fullName": "Test register 3",
      "role": "ATHLETE",
      "gender": "Male",
      "dob": "2001-03-10T00:00:00.000Z"
    },
    "userData": {
      "position": "Forward",
      "jerseyNumber": 40
    }
  }
}

script:post-response {
  if (res.status === 201 && res.body.data?.token) {
    bru.setEnvVar("authToken", res.body.data.token);
  }
}
